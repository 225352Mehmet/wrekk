<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ChatGPT Güvenli Sohbet</title>
</head>
<body style="max-width:600px; margin:auto; padding:20px; font-family:sans-serif;">
  <h1>ChatGPT ile Sohbet</h1>
  <input id="input" type="text" style="width:80%; padding:10px;" placeholder="Bir şeyler yaz..." />
  <button id="send">Gönder</button>
  <div id="response" style="margin-top:20px; white-space:pre-wrap;"></div>

<script>
  const input = document.getElementById("input");
  const send = document.getElementById("send");
  const responseDiv = document.getElementById("response");

  send.onclick = async () => {
    const message = input.value.trim();
    if(!message) return;
    responseDiv.textContent = "Yazıyor...";

    try {
      const res = await fetch("http://localhost:3000/chat", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ message })
      });
      const data = await res.json();
      if(res.ok) {
        responseDiv.textContent = data.reply;
      } else {
        responseDiv.textContent = "Hata: " + (data.error || "Bilinmeyen hata");
      }
    } catch(e) {
      responseDiv.textContent = "Sunucuya bağlanılamadı.";
    }
  };
</script>
</body>
</html>
