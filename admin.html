<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Admin Panel - Mesajlar</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #222;
    color: white;
    padding: 20px;
  }
  h1 {
    text-align: center;
  }
  table {
    border-collapse: collapse;
    width: 100%;
    max-width: 900px;
    margin: 20px auto;
  }
  th, td {
    border: 1px solid #555;
    padding: 8px 12px;
    text-align: left;
  }
  th {
    background: #4f88ff;
  }
  tbody tr:nth-child(odd) {
    background: #333;
  }
  tbody tr:nth-child(even) {
    background: #2a2a2a;
  }
</style>
</head>
<body>
<h1>Admin Panel - Gelen Mesajlar</h1>
<table>
  <thead>
    <tr>
      <th>Ad</th>
      <th>Email</th>
      <th>Mesaj</th>
      <th>Zaman</th>
    </tr>
  </thead>
  <tbody id="messages-table-body">
    <!-- Mesajlar buraya gelecek -->
  </tbody>
</table>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyAIis1m_MvjAtTTOnZKEo7__ElwNsoV8-A",
    authDomain: "wreekco.firebaseapp.com",
    databaseURL: "https://wreekco-default-rtdb.firebaseio.com",
    projectId: "wreekco",
    storageBucket: "wreekco.appspot.com",
    messagingSenderId: "255054069808",
    appId: "1:255054069808:web:25b9955cf8cce2bfc16df5",
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  const tbody = document.getElementById('messages-table-body');

  db.ref('messages').on('value', snapshot => {
    tbody.innerHTML = ''; // Temizle
    const data = snapshot.val();
    if (data) {
      Object.entries(data).forEach(([key, msg]) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${msg.name}</td>
          <td>${msg.email}</td>
          <td>${msg.message}</td>
          <td>${new Date(msg.timestamp).toLocaleString()}</td>
        `;
        tbody.appendChild(tr);
      });
    } else {
      tbody.innerHTML = '<tr><td colspan="4">Hen√ºz mesaj yok.</td></tr>';
    }
  });
</script>
</body>
</html>
